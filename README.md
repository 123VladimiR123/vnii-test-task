  ТЗ сделано на базовом hibernate + spring data, jpa

  Уникальность ключей реализована ограничениями (constraint - unique/primary key),
  т.к. hibernate по умолчанию использует insert-or-update, пришлось немного изменить базовые запросы и добавить своих для реализации прокидывания ошибок

  Решил в проекте использовать h2 в виду её удобства, поэтому для её развертки не нужно ничего (только спуллить проект)
  Однако в этой бд была проблема. Logback на отрез отказался логировать в H2, будь то classic logback / кастомные сборки, что выяснилось позже в просмотрах устаревших доков,
    однако вызов лога и шаблон для jdbc-логов оставил.

  Обновление стоимости реализовано через тригерры бд, т.к. H2 триггеры задаются java кодом, то имеем пакет triggers

  Ограничения constraint, обновление триггером и минимальный функционал покрыт тестами.

  Лишними вопросами мучить не хотел, поэтому подразумевал, что дочерние details не могут существовать без parent - master элемента, поэтому проставил каскады
    и придерживался этой логики по коду
